---
title: "time_series"
format: html
editor: visual
---

```{r loading files}
nepal <- read.csv("nepal.csv")
View(nepal)
nepal_gps <- read.csv("nepal_gps.csv")
View(nepal_gps)
library(tidyverse)

nepal_gps_subset <- nepal_gps %>%
  select(Year, In_silico_serotype, Clinical_manifestation)

nepal_plot_data <- nepal %>%
  select(Serotype, X2014n, X2015n, X2017n, X2018n, X2019n, X2021n) %>%
  pivot_longer(
    cols = starts_with("X"),
    names_to = "Year",
    values_to = "Count"
  ) %>%
  mutate(Year = gsub("X|n", "", Year)) %>%  # remove 'X' and 'n' from year strings
  pivot_wider(
    names_from = Serotype,
    values_from = Count
  ) %>%
  select(Year, (last_col() - 11):last_col()-1)

View(nepal_plot_data)

nepal_long <- nepal_plot_data %>%
  pivot_longer(
    cols = -Year,
    names_to = "Serotype",
    values_to = "Count"
  )

# Plot
ggplot(data = nepal_long, aes(x = as.numeric(Year), y = Count, color = Serotype)) +
  geom_line() +
  theme_bw() +
  labs(x = "Year", y = "Count", title = "Serotype Trends Over Time")
```

You can add options to executable code like this

```{r}
#| echo: false
2 * 2
```

The `echo: false` option disables the printing of code (only output is displayed).
